(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],s[o]&&m.push(s[o][0]),s[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("c21b"),s=n.n(i);s.a},"059b":function(t,e,n){"use strict";var i=n("8972"),s=n.n(i);s.a},1158:function(t,e,n){"use strict";var i=n("83a6"),s=n.n(i);s.a},"1d48":function(t,e,n){"use strict";var i=n("a45f"),s=n.n(i);s.a},"2adb":function(t,e,n){"use strict";var i=n("5d23"),s=n.n(i);s.a},"32d1":function(t,e,n){"use strict";var i=n("cc65"),s=n.n(i);s.a},"384a":function(t,e,n){},"3c53":function(t,e,n){"use strict";var i=n("384a"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view")],1)},a=[],o={name:"app"},r=o,c=(n("034f"),n("2877")),l=Object(c["a"])(r,s,a,!1,null,null,null);l.options.__file="App.vue";var u=l.exports,d=(n("15f5"),n("7051"),n("2f62")),m=n("8c4f"),v=n("5c96"),p=n.n(v),_=(n("0fae"),n("e069")),f=n.n(_),h=(n("dcad"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav",{attrs:{pushDown:!0}}),n("div",{staticClass:"container"},[n("div",{staticClass:"col-tf-4"},[n("SideNav")],1),n("div",{staticClass:"col-tf-14"},[n("el-row",{staticClass:"card"},t._l(t.tweet,function(e,i){return n("el-card",[n("div",{staticClass:"col-tf-3 user-head"},[n("img",{attrs:{src:e.$user.avatar,alt:""}})]),n("div",{staticClass:"col-tf-21"},[n("div",{staticClass:"l1"},[n("span",{staticClass:"name"},[t._v(t._s(e.$user.username))]),n("span",{staticClass:"count"},[t._v("@stephenCurry30")]),n("span",{staticClass:"time"},[t._v(". 1天")])]),n("div",{staticClass:"l2"},[t._v("\n                            "+t._s(e.content.text)+"\n                        ")]),n("div",{staticClass:"l3"},[n("img",{attrs:{src:e.content&&e.content.img?e.content.img:"",alt:""}})]),n("div",{staticClass:"l4"},[n("span",{on:{click:function(n){t.show_comment(e.id)}}},[n("Icon",{attrs:{size:"20",type:"ios-chatboxes-outline"}}),n("span",{staticClass:"val"},[t._v("203")])],1),n("span",[n("Icon",{attrs:{size:"20",type:"ios-repeat"}}),n("span",{staticClass:"val"},[t._v("1k")])],1),n("span",[n("Icon",{attrs:{size:"20",type:"ios-heart-outline"}}),n("span",{staticClass:"val"},[t._v("1万")])],1),n("span",[n("Icon",{attrs:{size:"20",type:"ios-mail-outline"}})],1)]),t.comment_visible&&t.on_click_comment_tweet_id==e.id?n("div",{staticClass:"l5"},[n("div",{staticClass:"comment-editor"},[n("div",{staticClass:"col-tf-3"},[n("img",{attrs:{src:t.uinfo.avatar,alt:""}})]),n("div",{staticClass:"col-tf-21"},[n("div",{staticClass:"r1"},[n("span",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],attrs:{id:"",cols:"30",rows:"10"},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})])]),n("div",{staticClass:"r2"},[n("div",{staticClass:"col-lg-6 icon-group"},[n("span",[n("Icon",{attrs:{size:"15",type:"md-images"}})],1),n("span",[n("Icon",{attrs:{size:"15",type:"ios-link"}})],1),n("span",[n("Icon",{attrs:{size:"15",type:"md-images"}})],1),n("span",{},[n("input",{attrs:{type:"checkbox"}}),t._v("同时转发\n                                            ")])]),n("div",{staticClass:"col-lg-6 right btn-group"},[n("button",{staticClass:"btn-cancel"},[t._v("取消")]),n("button",{staticClass:"btn-sub",on:{click:function(n){t.sub_comment(e.id)}}},[t._v("提交")])])])])]),t.comment_visible&&t.on_click_comment_tweet_id==e.id?n("div",{staticClass:"comment-list"},[n("div",{staticClass:"l1"},[n("div",{staticClass:"col-lg-6"},[t._v("全部评论")]),n("div",{staticClass:"col-lg-6 right"},[n("span",[t._v("最近")]),n("span",[t._v("最早")]),n("span",[t._v("最赞")])])]),n("div",{staticClass:"l2"},t._l(t.comment_list,function(e){return n("div",{staticClass:"comment-card"},[n("div",{staticClass:"col-tf-3"},[n("img",{attrs:{src:e.$user.avatar,alt:""}})]),n("div",{staticClass:"col-tf-21"},[n("div",[n("div",{staticClass:"col-lg-6 name"},[t._v(t._s(e.$user.username))]),n("div",{staticClass:"col-lg-6 right"},[t._v("1分钟")])]),e.$comment?n("div",{staticClass:"reply_to l-font"},[n("span",[t._v("@"+t._s(e.$comment&&e.$comment[0].user_id)+":")]),n("span",[t._v(t._s(e.$comment&&e.$comment[0].content))])]):t._e(),n("div",{staticClass:"l-font"},[t._v(t._s(e.content))]),n("div",{staticClass:"icon-group"},[n("span",{on:{click:function(n){t.show_reply_comment(e.id)}}},[n("Icon",{attrs:{size:"15",type:"ios-chatboxes-outline"}}),n("span",{staticClass:"s-font"},[t._v("回复")])],1),n("span",[n("Icon",{attrs:{size:"15",type:"ios-thumbs-up-outline"}}),n("span",{staticClass:"s-font"},[t._v("点赞")])],1)])]),t.reply_comment_visible&&e.id==t.on_click_comment_id?n("div",{staticClass:"reply_comment"},[n("div",{staticClass:"col-tf-3"},[n("img",{attrs:{src:t.uinfo.avatar,alt:""}})]),n("div",{staticClass:"col-tf-21"},[n("div",{staticClass:"r1"},[n("span",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_comment.content,expression:"reply_comment.content"}],attrs:{id:"",cols:"30",rows:"10"},domProps:{value:t.reply_comment.content},on:{input:function(e){e.target.composing||t.$set(t.reply_comment,"content",e.target.value)}}})])]),n("div",{staticClass:"r2"},[n("div",{staticClass:"col-lg-6 icon-group"},[n("span",[n("Icon",{attrs:{size:"15",type:"md-images"}})],1),n("span",[n("Icon",{attrs:{size:"15",type:"ios-link"}})],1),n("span",[n("Icon",{attrs:{size:"15",type:"md-images"}})],1),n("span",{},[n("input",{attrs:{type:"checkbox"}}),t._v("同时转发\n                                                        ")])]),n("div",{staticClass:"col-lg-6 right btn-group"},[n("button",{staticClass:"btn-cancel"},[t._v("取消")]),n("button",{staticClass:"btn-sub",on:{click:function(e){t.sub_reply_comment()}}},[t._v("提交")])])])])]):t._e()])}))]):t._e()]):t._e()])])}))],1),n("div",{staticClass:"col-tf-6"})])],1)}),g=[],b=n("a322"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show_editor?n("div",{staticClass:"mask"},[n("div",{staticClass:"wrap-editor"},[n("div",{staticClass:"header"},[n("div",{staticClass:"col-lg-10 title"},[t._v("有什么告诉大家")]),n("div",{staticClass:"col-lg-2 close right",on:{click:function(e){t.show_editor=!1}}})]),n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.content.text,expression:"current.content.text"}],style:t.current.content.img?"border-bottom: 1px solid rgba(0, 0, 0, .1)":"",attrs:{id:"",cols:"30",rows:"10"},domProps:{value:t.current.content.text},on:{input:function(e){e.target.composing||t.$set(t.current.content,"text",e.target.value)}}}),t.show_img?n("div",{staticClass:"img-area"},[n("span",{staticClass:"img-wrap"},[n("img",{attrs:{src:t.current.content.img,alt:""}}),n("div",{staticClass:"close-img"},[t._v("x")])])]):t._e()]),n("div",{staticClass:"l3"},[n("div",{staticClass:"col-lg-6 icon"},[n("span",{staticClass:"upload-img"},[n("i",{staticClass:"el-icon-picture"}),n("input",{attrs:{type:"file",id:"uploader",multiple:""},on:{change:function(e){t.upload_file(e)}}})]),t._m(0),t._m(1)]),t._m(2)])])])]):t._e(),n("div",[t.isAuth?n("div",[n("div",{staticClass:"nav-area",style:{marginBottom:this.pushDown?"30px":"0"}},[t._m(6)])]):n("div",{staticClass:"nav-area",style:{marginBottom:this.pushDown?"30px":"0"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"col-tf-4 logo"},[t._v("\n                    FT\n                ")]),n("div",{staticClass:"col-tf-14 item"},[n("div",{staticClass:"col-lg-6 nav-item"},[n("router-link",{attrs:{to:"/"}},[n("span",[n("i",{staticClass:"fa fa-home",attrs:{"aria-hidden":"true"}}),t._v("首页")])]),t._m(3),t._m(4)],1),t._m(5)]),n("div",{staticClass:"col-tf-6 user-area"},[n("div",{staticClass:"col-lg-6 user right"},[t.uinfo?n("div",[n("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),t._v("\n                            "+t._s(t.uinfo.username)+"\n                        ")]):n("div",[n("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)]),n("div",{staticClass:"col-lg-6 btn"},[n("button",{on:{click:function(e){t.show_editor=!0}}},[t._v("发推")])])])])])])])},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i",{staticClass:"el-icon-message"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i",{staticClass:"el-icon-location"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-lg-6 right"},[n("button",{staticClass:"editor-btn",attrs:{type:"submit"}},[t._v("发送")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i",{staticClass:"fa fa-bell",attrs:{"aria-hidden":"true"}}),t._v("通知")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}}),t._v("私信")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-lg-6 search-area right"},[n("input",{attrs:{type:"search",placeholder:"搜索 FT"}}),n("button",{attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"col-tf-3 logo"}),n("div",{staticClass:"col-tf-16 item"},[n("div",{staticClass:"col-lg-6 nav-item"},[n("span",[n("i",{staticClass:"fa fa-home",attrs:{"aria-hidden":"true"}}),t._v("首页")]),n("span",[n("i",{staticClass:"fa fa-bell",attrs:{"aria-hidden":"true"}}),t._v("关于")])])]),n("div",{staticClass:"col-tf-5 user-area"})])}],y=(n("7f7f"),n("bc3a")),x=n.n(y),$="5af0d578fad72fc680a6cdbd8e6c738fd431aa40330b04c3e53b7ab0a94ef2b5",k="http://mock.biaoyansu.com/api/1/";function N(t,e){return btoa(t+e)}function O(t,e){var n=(new Date).getTime(),i=N($,n),s={headers:{"BIAO-MOCK-APP-KEY":$,"BIAO-MOCK-TIMESTAMP":n,"BIAO-MOCK-SIGNATURE":i}};return t=k+t,x.a.post(t,e,s).then(function(t){return t.data})}function I(t,e){return O("user/read",{where:{or:[["username","=",t],["email","=",t],["phone","=",t]]}}).then(function(t){var n;return!(!(n=t.data[0])||n.password!==e)&&n})}function E(){return JSON.parse(localStorage.getItem("uinfo"))||""}function P(t){localStorage.removeItem("uinfo"),location.href=t||"/"}function S(t){localStorage.setItem("uinfo",JSON.stringify(t))}function j(){var t=this.uinfo();return t&&this.uinfo().is_admin}function D(){return JSON.parse(localStorage.getItem("uinfo"))}function T(t){delete t.password,localStorage.setItem("uinfo",JSON.stringify(t))}var A={uinfo:E,logout:P,login:S,is_admin:j,is_login:D,replace_uinfo:T,exist:I},z={props:{pushDown:{default:!1},isAuth:{default:!1}},data:function(){return{show_editor:!1,uinfo:A.uinfo(),file:[],current:{content:{}},show_img:!1}},methods:{upload_file:function(t){var e=this,n=t.target.files[0],i=new FormData;i.append("file",n),i.append("name",n.name),O("_file/create",i).then(function(t){var n=t.data;e.current.content.img="http://"+n._base_url+"/"+n._key,e.show_img=!0,console.log("this.current.content.img",e.current.content.img)})},submit:function(){var t=this;this.uinfo.id&&(this.current.user_id=this.uinfo.id,O("tweet/create",this.current).then(function(e){t.current={},t.show_editor=!1}))}}},K=z,q=(n("059b"),Object(c["a"])(K,w,C,!1,null,"78bd18e0",null));q.options.__file="Nav.vue";var M=q.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"side-nav"},[n("div",{staticClass:"user-area"},[n("div",{staticClass:"user-icon"},[n("img",{attrs:{src:t.uinfo.avatar,alt:""}})]),n("div",{staticClass:"username"},[t._v("Linkding")]),t._m(0)]),n("div",{staticClass:"user-panel"},[n("div",{staticClass:"p1"},[n("div",[n("span",[n("Icon",{attrs:{type:"md-home"}})],1),t._v("首页")]),n("div",[n("span",[n("Icon",{attrs:{type:"md-chatboxes"}})],1),t._v("讨论")]),n("div",[n("span",[n("Icon",{attrs:{type:"md-options"}})],1),t._v("持仓亏损")]),n("div",[n("span",[n("Icon",{attrs:{type:"md-star"}})],1),t._v("收藏")])])])])},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-data"},[n("div",{staticClass:"col-lg-6"},[n("div",{staticClass:"num"},[t._v("336")]),n("div",[t._v("关注")])]),n("div",{staticClass:"col-lg-6"},[n("div",{staticClass:"num"},[t._v("18")]),n("div",[t._v("粉丝")])])])}],B={data:function(){return{uinfo:A.uinfo()}}},J=B,W=(n("2adb"),Object(c["a"])(J,F,L,!1,null,"2ebc0ba2",null));W.options.__file="SideNav.vue";var Z=W.exports,U={components:{Nav:M,SideNav:Z},data:function(){return{tweet:{},uinfo:A.uinfo(),with:[{model:"user",relation:"has_one"}],comment:{},reply_comment:{},comment_list:[],on_click_comment_tweet_id:"",on_click_comment_id:"",comment_visible:!1,reply_comment_visible:!1}},mounted:function(){this.read()},methods:{read:function(){var t=this;O("tweet/read",{with:this.with}).then(function(e){t.tweet=e.data,console.log("this.tweet",t.tweet)})},sub_comment:function(t){var e=this;this.comment.user_id=this.uinfo.id,this.comment.tweet_id=t,O("comment/create",this.comment).then(function(n){e.comment={},e.read_comment(t)})},sub_reply_comment:function(){var t=this;this.reply_comment.user_id=this.uinfo.id,this.reply_comment.tweet_id=this.on_click_comment_tweet_id,this.reply_comment.reply_id=this.on_click_comment_id,O("comment/create",this.reply_comment).then(function(e){var n=e.data.id,i=e.data.reply_id;t.glue_reply_comment(n,i),t.reply_comment_visible=!1,t.read_comment(t.on_click_comment_tweet_id)})},glue_reply_comment:function(t,e){O("comment/bind",{model:"comment",glue:Object(b["a"])({},t,e)})},read_comment:function(t){var e=this;this.on_click_comment_tweet_id=t,O("comment/read",{where:{tweet_id:t},with:[{model:"user",relation:"has_one"},[{model:"user",relation:"has_one"},{model:"comment",relation:"belongs_to_many"}]]}).then(function(t){e.comment_list=t.data})},show_comment:function(t){this.comment_visible||this.read_comment(t),this.comment_visible=!this.comment_visible},show_reply_comment:function(t){this.reply_comment_visible||(this.on_click_comment_id=t),this.reply_comment_visible=!this.reply_comment_visible}}},G=U,H=(n("1158"),Object(c["a"])(G,h,g,!1,null,"c2bd5326",null));H.options.__file="Home.vue";var R=H.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav",{attrs:{isAuth:!0,pushDown:!0}}),n("div",{staticClass:"container"},[n("div",{staticClass:"col-tf-3"}),n("div",{staticClass:"col-tf-16"},[n("div",{staticClass:"login-area"},[n("div",{staticClass:"title"},[t._v("登录 Ftwitter")]),n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.login_fail?n("div",{staticStyle:{color:"red"}},[t._v("用户名或者密码错误")]):t._e(),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.unique,expression:"current.unique"}],attrs:{type:"text",placeholder:"手机、邮箱或者用户名"},domProps:{value:t.current.unique},on:{input:function(e){e.target.composing||t.$set(t.current,"unique",e.target.value)}}})]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.password,expression:"current.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.current.password},on:{input:function(e){e.target.composing||t.$set(t.current,"password",e.target.value)}}})]),t._m(0)])]),n("div",{staticClass:"sub-area"},[n("div",{staticClass:"main"},[n("div",[t._v("首次使用Ftwitter吗？"),n("router-link",{attrs:{to:"/signup"}},[t._v("现在注册")])],1)])])]),n("div",{staticClass:"col-tf-5"})])],1)},Q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"l3"},[n("button",{attrs:{type:"submit"}},[t._v("登录")]),n("input",{attrs:{type:"checkbox",id:"re"}}),n("label",{attrs:{for:"re"}},[t._v("记住我")]),n("span",[t._v("忘记密码")])])}],V={components:{Nav:M},data:function(){return{current:{},login_fail:!1}},methods:{submit:function(){var t=this,e=this.current.unique,n=this.current.password;if(e&&n){var i=[["username","=",e],["email","=",e],["phone","=",e]];O("user/read",{where:{or:i}}).then(function(e){var n=e.data[0];n&&t.current.password==n.password?t.on_login_success(n):t.login_fail=!0})}},on_login_success:function(t){this.login_fail=!1,delete t.password,A.login(t),this.$router.push("/")}}},X=V,tt=(n("3c53"),Object(c["a"])(X,Y,Q,!1,null,"acd35cd4",null));tt.options.__file="Login.vue";var et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav",{attrs:{isAuth:!0,pushDown:!0}}),n("div",{staticClass:"container"},[n("div",{staticClass:"col-tf-3"}),n("div",{staticClass:"col-tf-16"},[n("div",{staticClass:"login-area"},[n("div",{staticClass:"title"},[t._v("注册 Ftwitter")]),n("form",[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.unique,expression:"current.unique"}],attrs:{type:"text",placeholder:"手机或者邮箱"},domProps:{value:t.current.unique},on:{input:function(e){e.target.composing||t.$set(t.current,"unique",e.target.value)}}})]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.username,expression:"current.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.current.username},on:{input:function(e){e.target.composing||t.$set(t.current,"username",e.target.value)}}})]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.password,expression:"current.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.current.password},on:{input:function(e){e.target.composing||t.$set(t.current,"password",e.target.value)}}})]),n("div",{staticClass:"l3"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:t.submit}},[t._v("\n                            注册\n                        ")])],1)])]),n("div",{staticClass:"sub-area"},[n("div",{staticClass:"main"},[n("div",[t._v("已有账号？"),n("router-link",{attrs:{to:"/login"}},[t._v("现在登录")])],1)])])]),n("div",{staticClass:"col-tf-5"})])],1)},it=[],st={components:{Nav:M},data:function(){return{current:{},fullscreenLoading:!1}},methods:{submit:function(){var t=this,e=/[0-9a-zA-Z]+@[0-9a-zA-Z]+\.[a-zA-Z]/,n=/1[34578][012356789]\d{8}|134[012345678]\d{7}/;e.test(this.current.unique)&&(this.current.email=this.current.unique),n.test(this.current.unique)&&(this.current.phone=this.current.unique),this.fullscreenLoading=!0,O("user/create",this.current).then(function(e){location.href="/",t.fullscreenLoading=!1})}}},at=st,ot=(n("87ee"),Object(c["a"])(at,nt,it,!1,null,"49f85fe4",null));ot.options.__file="Signup.vue";var rt=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view")],1)},lt=[],ut={},dt=ut,mt=(n("67c6"),Object(c["a"])(dt,ct,lt,!1,null,"59ef2b98",null));mt.options.__file="Base.vue";var vt=mt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav",{attrs:{pushDown:!0}}),n("div",{staticClass:"container"},[n("div",{staticClass:"col-lg-3"},[n("AdminNav")],1),n("div",{staticClass:"col-lg-9"},[n("div",{staticClass:"wrapper"},[n("h2",[t._v("用户列表")]),n("div",{staticClass:"tool-bar"},[n("button",{staticClass:"btn",on:{click:function(e){t.show_form=!t.show_form}}},[t.show_form?n("span",{staticClass:"btn"},[t._v("收起")]):n("span",[t._v("创建用户")])])]),t.show_form?n("form",{on:{submit:function(e){t.cou(e)}}},[n("div",{staticClass:"input-control"},[n("label",[t._v("用户名")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.username,expression:"current.username"}],attrs:{type:"text"},domProps:{value:t.current.username},on:{input:function(e){e.target.composing||t.$set(t.current,"username",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("label",[t._v("密码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.password,expression:"current.password"}],attrs:{type:"password"},domProps:{value:t.current.password},on:{input:function(e){e.target.composing||t.$set(t.current,"password",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("label",[t._v("邮箱")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.email,expression:"current.email"}],attrs:{type:"text"},domProps:{value:t.current.email},on:{input:function(e){e.target.composing||t.$set(t.current,"email",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("label",[t._v("电话")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.phone,expression:"current.phone"}],attrs:{type:"text"},domProps:{value:t.current.phone},on:{input:function(e){e.target.composing||t.$set(t.current,"phone",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("label",[t._v("地址")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.location,expression:"current.location"}],attrs:{type:"text"},domProps:{value:t.current.location},on:{input:function(e){e.target.composing||t.$set(t.current,"location",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("label",[t._v("头像")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.current.avatar,expression:"current.avatar"}],attrs:{type:"text"},domProps:{value:t.current.avatar},on:{input:function(e){e.target.composing||t.$set(t.current,"avatar",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("提交")]),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){t.cancel()}}},[t._v("取消")])])]):t._e(),n("div",{staticClass:"table"},[n("table",[t._m(0),n("tbody",t._l(t.list,function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.id))]),n("td",[n("img",{staticClass:"avatar",attrs:{src:e.avatar?e.avatar:"",alt:""}})]),n("td",[t._v(t._s(e.username))]),n("td",[t._v(t._s(e.password))]),n("td",[t._v(t._s(e.email))]),n("td",[t._v(t._s(e.phone))]),n("td",[t._v(t._s(e.location))]),n("td",[n("button",{on:{click:function(n){t.update(e)}}},[t._v("编辑")]),n("button",{on:{click:function(n){t.remove(e.id)}}},[t._v("删除")])])])}))])])])])])],1)},_t=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("用户id")]),n("th",[t._v("用户头像")]),n("th",[t._v("用户名")]),n("th",[t._v("密码")]),n("th",[t._v("邮箱")]),n("th",[t._v("电话")]),n("th",[t._v("地址")]),n("th",[t._v("操作")])])}],ft=(n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown",style:{width:t.Width+"px"},on:{mouseleave:function(e){t.show_menu=!1}}},[t.showInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"search",placeholder:"请搜索"},domProps:{value:t.keyword},on:{keyup:function(e){t.show_menu=!0},focus:function(e){t.show_menu=!0},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}):t._e(),n("div",{staticClass:"drop-area",on:{mouseenter:function(e){t.show_menu=!0}}},[t.showItemTitle?n("div",{staticClass:"drop-title"},[t._v(t._s(t.selected?t.selected[t.displayKey]:t.itemTitle?t.itemTitle:"请选择"))]):t._e(),t.result.length&&t.show_menu?n("div",{staticClass:"drop-item"},t._l(t.result,function(e,i){return n("div",{key:i,on:{click:function(n){t.select(e)}}},[t._v(t._s(e[t.displayKey]))])})):t._e()])])}),ht=[],gt=(n("386d"),n("7514"),n("28a5"),n("f751"),{props:{Width:"",showItemTitle:{default:!1},itemTitle:{},showInput:{default:!1},api:{},list:{default:function(){return[]}},default:{},onSelect:{},primaryKey:{default:"id"},displayKey:{default:"name"}},data:function(){return{api_conf:{},result:[],selected:"",show_menu:!1,keyword:"",timer:null}},methods:{test:function(){console.log("11")},parse_api:function(){var t=this.api;if("string"!=typeof t)return Object.assign({},O);t=t.split(".");var e=t[0],n=t[1];return n=n.split(","),{model:e,property:n}},on_edit_product:function(t){t&&null!=t&&void 0!=t?(this.keyword=t[this.displayKey],this.selected=t):(this.selected={},this.keyword="")},on_edit_vehicle:function(t){t||(this.selected={}),this.selected=t},on_edit_report:function(t){t||(this.selected={}),this.selected=t},set_default:function(){var t=this,e=this.default;if(e){var n=this.list.find(function(n){return n[t.primaryKey]==e});this.select(n)}},select:function(t){this.selected=t,this.showInput&&(this.keyword=t[this.displayKey]),this.onSelect&&this.onSelect(t)},filter:function(){var t=this;this.result=Object.assign([],this.list),this.result=this.result.filter(function(e){return-1!==e[t.displayKey].indexOf(t.keyword)})},search:function(){var t=this,e={},n=this.api_conf.property;n&&(n.forEach(function(n){e[n]=t.keyword}),clearTimeout(this.timer),this.timer=setTimeout(function(){O("".concat(t.api_conf.model,"/search"),{or:e}).then(function(e){t.result=e.data})},300))}},mounted:function(){this.api_conf=this.parse_api();var t=this.list;t&&(this.result=this.list),console.log("this.result",this.result)},watch:{keyword:function(){this.api?this.search():this.filter()},default:{deep:!0,handler:function(){this.set_default()}},list:function(t){this.list=t,this.result=this.list,console.log("this.result111",this.result)},change_item_title:function(){return itemTitle?selected?selected[displayKey]:"请选择":itemTitle}}}),bt=gt,wt=(n("be01"),Object(c["a"])(bt,ft,ht,!1,null,null,null));wt.options.__file="DropDown.vue";var Ct=wt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-side",style:{width:t.width}},[n("router-link",{staticClass:"nav-item",attrs:{to:"/admin/user"}},[t._v("用户管理")]),n("router-link",{staticClass:"nav-item",attrs:{to:"/admin/tweet"}},[t._v("微博管理")])],1)},xt=[],$t=(n("f58b"),{props:{width:["width"]}}),kt=$t,Nt=(n("de62"),Object(c["a"])(kt,yt,xt,!1,null,"50b5fa35",null));Nt.options.__file="AdminNav.vue";var Ot,It,Et=Nt.exports,Pt={components:{Nav:M,AdminNav:Et,DropDown:Ct},data:function(){return{total:0,last_page:0,current_page:1,limit:15,show_form:!1,current:{preview:[],new:!1},list:[],edit_mode:!1,keyword:"",model:null}},methods:{read_by_model:function(t){var e=this;O("".concat(t,"/read")).then(function(n){e[t]=n.data})},on_page_change:function(t){this.read(t)},read:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;O("".concat(this.model,"/read"),{limit:this.limit,page:e,sort_by:["id","down"],with:this.with}).then(function(e){t.list=e.data,t.total=e.total,t.last_page=e.last_page,t.current_page=e.current_page})},cou:function(t){var e=this;t.preventDefault();var n=this.current.id?"update":"create";O("".concat(this.model,"/").concat(n),this.current).then(function(t){e.read(e.current_page),e.current={}})},remove:function(t){var e=this;O("".concat(this.model,"/delete"),{id:t}).then(function(t){e.read()})},update:function(t){var e=this;this.current=t,this.show_form=!0,this.$nextTick(function(){"product"==e.model?e.edit_product(t):"model"==e.model?e.edit_model(t):"report"==e.model&&e.edit_report(t)})},edit_product:function(t){this.$refs.edit_product_breed.on_edit_product(t.$breed),this.$refs.edit_product_location.on_edit_product(t.$location),this.$refs.edit_product_occasion.on_edit_product(t.$occasion),this.$refs.edit_product_ptype.on_edit_product(t.$ptype)},edit_vehicle:function(t){this.$refs.edit_vehicle_brand.on_edit_vehicle(t.$brand),this.$refs.edit_vehicle_model.on_edit_vehicle(t.$model),this.$refs.edit_vehicle_design.on_edit_vehicle(t.$design)},edit_report:function(t){this.$refs.edit_report.on_edit_report(t.$vehicle)},cancel:function(){this.current={preview:[]},this.show_form=!1},search:function(t){var e=this,n={or:{}};this.searchable.forEach(function(e){n.or[e]=t}),O("".concat(this.model,"/search"),n).then(function(t){e.list=t.data,e.total=t.total})}},mounted:function(){if(!this.model)throw new Error("请在模型中配置model！");this.read()}},St=Pt,jt=(n("98d5"),Object(c["a"])(St,Ot,It,!1,null,"021125c0",null));jt.options.__file="AdminPage.vue";var Dt=jt.exports,Tt={mixins:[Dt],data:function(){return{model:"user"}}},At=Tt,zt=(n("32d1"),Object(c["a"])(At,pt,_t,!1,null,"e1625c0a",null));zt.options.__file="User.vue";var Kt=zt.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav",{attrs:{pushDown:!0}}),n("div",{staticClass:"container"},[n("div",{staticClass:"col-lg-3"},[n("AdminNav")],1),n("div",{staticClass:"col-lg-9"},[n("div",{staticClass:"wrapper"},[n("h2",[t._v("微博列表")]),n("div",{staticClass:"tool-bar"},[n("button",{staticClass:"btn",on:{click:function(e){t.show_form=!t.show_form}}},[t.show_form?n("span",{staticClass:"btn"},[t._v("收起")]):n("span",[t._v("创建微博")])])]),t.show_form?n("form",{on:{submit:function(e){t.cou(e)}}},[n("div",{staticClass:"input-control"},[n("label",[t._v("用户名")]),n("DropDown",{attrs:{list:t.user,showInput:!0,displayKey:"username",Width:"200"}})],1),n("div",{staticClass:"input-control"},[n("label",[t._v("正文")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.content.text,expression:"current.content.text"}],domProps:{value:t.current.content.text},on:{input:function(e){e.target.composing||t.$set(t.current.content,"text",e.target.value)}}})]),n("div",{staticClass:"input-control"},[n("label",[t._v("微博图片")]),n("input",{attrs:{type:"file"},on:{change:t.upload_file}})]),n("div",{staticClass:"input-control"},[n("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("提交")]),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){t.cancel()}}},[t._v("取消")])])]):t._e(),n("div",{staticClass:"table"},[n("table",[t._m(0),n("tbody",t._l(t.list,function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.id))]),n("td",[t._v(t._s(e.$user.username))]),n("td",[t._v(t._s(e.content&&e.content.text?e.content.text:"-"))]),n("td",[n("img",{staticClass:"img",attrs:{src:e.content&&e.content.img?e.content.img:"",alt:""}})]),n("td",[n("button",{on:{click:function(n){t.update(e)}}},[t._v("编辑")]),n("button",{on:{click:function(n){t.remove(e.id)}}},[t._v("删除")])])])}))])])])])])],1)},Mt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("微博id")]),n("th",[t._v("用户名")]),n("th",[t._v("微博正文")]),n("th",[t._v("微博图片")]),n("th",[t._v("操作")])])}],Ft={mixins:[Dt],data:function(){return{model:"tweet",with:[{model:"user",relation:"has_one"}],current:{content:{}}}},mounted:function(){this.read_by_model("user")},methods:{upload_file:function(t){var e=this,n=t.target.files[0],i=new FormData;i.append("file",n),i.append("name",n.name),api("_file/create",i).then(function(t){var n=t.data;e.current.content.img="http://"+n._base_url+"/"+n._key})}}},Lt=Ft,Bt=(n("1d48"),Object(c["a"])(Lt,qt,Mt,!1,null,"69bac008",null));Bt.options.__file="Tweet.vue";var Jt=Bt.exports;n("f771");i["default"].use(d["a"]),i["default"].use(m["a"]),i["default"].use(p.a),i["default"].config.productionTip=!1,i["default"].use(f.a);var Wt=new m["a"]({routes:[{path:"/",component:R,meta:{title:"首页|ftwitter"}},{path:"/login",component:et,meta:{title:"登录|ftwitter"}},{path:"/signup",component:rt,meta:{title:"注册|ftwitter"}},{path:"/admin",component:vt,meta:{title:"后台|ftwitter"},children:[{path:"user",component:Kt,meta:{title:"用户管理|ftwitter"}},{path:"tweet",component:Jt,meta:{title:"微博管理|ftwitter"}}]}]});Wt.beforeEach(function(t,e,n){document.title=t.meta.title,n()}),new i["default"]({router:Wt,render:function(t){return t(u)}}).$mount("#app")},"5d23":function(t,e,n){},"67c6":function(t,e,n){"use strict";var i=n("e042"),s=n.n(i);s.a},"6a29":function(t,e,n){},"6d32":function(t,e,n){},7381:function(t,e,n){},"83a6":function(t,e,n){},"87ee":function(t,e,n){"use strict";var i=n("a7c7"),s=n.n(i);s.a},8972:function(t,e,n){},"98d5":function(t,e,n){"use strict";var i=n("7381"),s=n.n(i);s.a},a45f:function(t,e,n){},a7c7:function(t,e,n){},be01:function(t,e,n){"use strict";var i=n("6d32"),s=n.n(i);s.a},c21b:function(t,e,n){},cc65:function(t,e,n){},de62:function(t,e,n){"use strict";var i=n("6a29"),s=n.n(i);s.a},e042:function(t,e,n){},f58b:function(t,e,n){},f771:function(t,e,n){}});
//# sourceMappingURL=app.b6cdecde.js.map